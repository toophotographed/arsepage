<script>
    const API_KEY = '5d6ca89ad92143aa8f9e323beb8acc25';

    async function fetchLeagueTable() {
        try {
            const response = await fetch('https://api.football-data.org/v4/competitions/PL/standings', {
                method: 'GET',
                mode: 'cors',  // Explicitly set CORS mode
                headers: {
                    'X-Auth-Token': API_KEY,
                }
            });
            
            if (response.status === 404) {
                throw new Error('API endpoint not found. This might be due to CORS restrictions.');
            }
            
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            
            const data = await response.json();
            populateLeagueTable(data.standings[0].table);
        } catch (error) {
            console.error('Error fetching league table:', error);
            document.getElementById('tableBody').innerHTML = `
                <tr>
                    <td colspan="11" class="text-center text-danger">
                        <div class="alert alert-danger">
                            Unable to load table data. Error: ${error.message}<br>
                            <small>Note: This API may not work directly from browsers due to CORS restrictions. 
                            Consider using a backend proxy or serverless function.</small>
                        </div>
                    </td>
                </tr>`;
        }
    }

    async function fetchFixtures() {
        try {
            const response = await fetch('https://api.football-data.org/v4/teams/57/matches?status=SCHEDULED', {
                method: 'GET',
                mode: 'cors',  // Explicitly set CORS mode
                headers: {
                    'X-Auth-Token': API_KEY,
                }
            });
            
            if (response.status === 404) {
                throw new Error('API endpoint not found. This might be due to CORS restrictions.');
            }
            
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            
            const data = await response.json();
            populateFixtures(data.matches);
        } catch (error) {
            console.error('Error fetching fixtures:', error);
            document.getElementById('fixturesList').innerHTML = `
                <div class="alert alert-danger">
                    Unable to load fixtures. Error: ${error.message}<br>
                    <small>Note: This API may not work directly from browsers due to CORS restrictions. 
                    Consider using a backend proxy or serverless function.</small>
                </div>`;
        }
    }

    // ... rest of existing code ...
</script> 
